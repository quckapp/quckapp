# Notifications API Paths

notifications:
  get:
    tags:
      - Notifications
    summary: List notifications
    description: Get user's notifications
    operationId: listNotifications
    security:
      - bearerAuth: []
    parameters:
      - name: unread
        in: query
        schema:
          type: boolean
        description: Only show unread notifications
      - name: type
        in: query
        schema:
          type: string
          enum: [message, mention, reaction, thread_reply, channel_invite, workspace_invite, dm, call_incoming, call_missed, huddle_invite, file_shared, reminder, system]
      - name: before
        in: query
        schema:
          type: string
          format: date-time
      - name: after
        in: query
        schema:
          type: string
          format: date-time
      - $ref: '../schemas/common.yaml#/PageParam'
      - $ref: '../schemas/common.yaml#/LimitParam'
    responses:
      '200':
        description: List of notifications
        content:
          application/json:
            schema:
              type: object
              properties:
                notifications:
                  type: array
                  items:
                    $ref: '../schemas/notification.yaml#/Notification'
                pagination:
                  $ref: '../schemas/common.yaml#/Pagination'
                unreadCount:
                  type: integer

notification-by-id:
  get:
    tags:
      - Notifications
    summary: Get notification
    description: Get a specific notification
    operationId: getNotification
    security:
      - bearerAuth: []
    parameters:
      - name: notificationId
        in: path
        required: true
        schema:
          type: string
          format: uuid
    responses:
      '200':
        description: Notification details
        content:
          application/json:
            schema:
              $ref: '../schemas/notification.yaml#/Notification'
      '404':
        description: Notification not found
        content:
          application/json:
            schema:
              $ref: '../schemas/error.yaml#/Error'

  delete:
    tags:
      - Notifications
    summary: Delete notification
    description: Delete a notification
    operationId: deleteNotification
    security:
      - bearerAuth: []
    parameters:
      - name: notificationId
        in: path
        required: true
        schema:
          type: string
          format: uuid
    responses:
      '204':
        description: Notification deleted

notifications-mark-read:
  post:
    tags:
      - Notifications
    summary: Mark notifications as read
    description: Mark one or more notifications as read
    operationId: markNotificationsRead
    security:
      - bearerAuth: []
    requestBody:
      required: true
      content:
        application/json:
          schema:
            $ref: '../schemas/notification.yaml#/MarkNotificationsReadRequest'
    responses:
      '200':
        description: Notifications marked as read
        content:
          application/json:
            schema:
              type: object
              properties:
                markedCount:
                  type: integer

notifications-unread-count:
  get:
    tags:
      - Notifications
    summary: Get unread count
    description: Get count of unread notifications
    operationId: getUnreadCount
    security:
      - bearerAuth: []
    responses:
      '200':
        description: Unread notification count
        content:
          application/json:
            schema:
              type: object
              properties:
                count:
                  type: integer
                byType:
                  type: object
                  additionalProperties:
                    type: integer

notification-settings:
  get:
    tags:
      - Notifications
    summary: Get notification settings
    description: Get user's notification settings
    operationId: getNotificationSettings
    security:
      - bearerAuth: []
    responses:
      '200':
        description: Notification settings
        content:
          application/json:
            schema:
              $ref: '../schemas/notification.yaml#/NotificationSettings'

  patch:
    tags:
      - Notifications
    summary: Update notification settings
    description: Update user's notification settings
    operationId: updateNotificationSettings
    security:
      - bearerAuth: []
    requestBody:
      required: true
      content:
        application/json:
          schema:
            $ref: '../schemas/notification.yaml#/UpdateNotificationSettingsRequest'
    responses:
      '200':
        description: Settings updated
        content:
          application/json:
            schema:
              $ref: '../schemas/notification.yaml#/NotificationSettings'

push-subscription:
  post:
    tags:
      - Notifications
    summary: Register push subscription
    description: Register a web push subscription
    operationId: registerPushSubscription
    security:
      - bearerAuth: []
    requestBody:
      required: true
      content:
        application/json:
          schema:
            $ref: '../schemas/notification.yaml#/PushSubscription'
    responses:
      '201':
        description: Subscription registered
        content:
          application/json:
            schema:
              type: object
              properties:
                id:
                  type: string
                  format: uuid

  delete:
    tags:
      - Notifications
    summary: Unregister push subscription
    description: Remove a push subscription
    operationId: unregisterPushSubscription
    security:
      - bearerAuth: []
    requestBody:
      required: true
      content:
        application/json:
          schema:
            type: object
            required:
              - endpoint
            properties:
              endpoint:
                type: string
                format: uri
    responses:
      '204':
        description: Subscription removed

device-token:
  post:
    tags:
      - Notifications
    summary: Register device token
    description: Register a mobile push notification token
    operationId: registerDeviceToken
    security:
      - bearerAuth: []
    requestBody:
      required: true
      content:
        application/json:
          schema:
            $ref: '../schemas/notification.yaml#/DeviceToken'
    responses:
      '201':
        description: Token registered
        content:
          application/json:
            schema:
              type: object
              properties:
                id:
                  type: string
                  format: uuid

  delete:
    tags:
      - Notifications
    summary: Unregister device token
    description: Remove a mobile push notification token
    operationId: unregisterDeviceToken
    security:
      - bearerAuth: []
    requestBody:
      required: true
      content:
        application/json:
          schema:
            type: object
            required:
              - token
            properties:
              token:
                type: string
    responses:
      '204':
        description: Token removed

dnd-status:
  get:
    tags:
      - Notifications
    summary: Get DND status
    description: Get current Do Not Disturb status
    operationId: getDndStatus
    security:
      - bearerAuth: []
    responses:
      '200':
        description: DND status
        content:
          application/json:
            schema:
              type: object
              properties:
                enabled:
                  type: boolean
                endsAt:
                  type: string
                  format: date-time
                snoozeRemaining:
                  type: integer
                  description: Remaining snooze time in minutes

  put:
    tags:
      - Notifications
    summary: Set DND
    description: Enable Do Not Disturb mode
    operationId: setDnd
    security:
      - bearerAuth: []
    requestBody:
      required: true
      content:
        application/json:
          schema:
            type: object
            properties:
              duration:
                type: integer
                description: Duration in minutes (0 for indefinite)
              until:
                type: string
                format: date-time
                description: End time (alternative to duration)
    responses:
      '200':
        description: DND enabled
        content:
          application/json:
            schema:
              type: object
              properties:
                enabled:
                  type: boolean
                endsAt:
                  type: string
                  format: date-time

  delete:
    tags:
      - Notifications
    summary: Disable DND
    description: Turn off Do Not Disturb mode
    operationId: disableDnd
    security:
      - bearerAuth: []
    responses:
      '200':
        description: DND disabled
        content:
          application/json:
            schema:
              type: object
              properties:
                enabled:
                  type: boolean

snooze:
  post:
    tags:
      - Notifications
    summary: Snooze notifications
    description: Temporarily snooze all notifications
    operationId: snoozeNotifications
    security:
      - bearerAuth: []
    requestBody:
      required: true
      content:
        application/json:
          schema:
            type: object
            required:
              - duration
            properties:
              duration:
                type: integer
                description: Snooze duration in minutes
                minimum: 1
                maximum: 1440
    responses:
      '200':
        description: Notifications snoozed
        content:
          application/json:
            schema:
              type: object
              properties:
                snoozeUntil:
                  type: string
                  format: date-time

test-notification:
  post:
    tags:
      - Notifications
    summary: Send test notification
    description: Send a test notification to verify settings
    operationId: sendTestNotification
    security:
      - bearerAuth: []
    requestBody:
      content:
        application/json:
          schema:
            type: object
            properties:
              channel:
                type: string
                enum: [push, email, desktop]
                default: push
    responses:
      '200':
        description: Test notification sent
        content:
          application/json:
            schema:
              type: object
              properties:
                sent:
                  type: boolean
                message:
                  type: string
