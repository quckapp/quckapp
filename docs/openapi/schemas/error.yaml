# Error Schema Definitions

Error:
  type: object
  required:
    - error
  properties:
    error:
      type: object
      required:
        - code
        - message
      properties:
        code:
          type: string
          description: Error code
          enum:
            - BAD_REQUEST
            - UNAUTHORIZED
            - FORBIDDEN
            - NOT_FOUND
            - CONFLICT
            - VALIDATION_ERROR
            - RATE_LIMITED
            - INTERNAL_ERROR
            - SERVICE_UNAVAILABLE
          example: BAD_REQUEST
        message:
          type: string
          description: Human-readable error message
          example: "Invalid request parameters"
        details:
          type: array
          description: Detailed error information
          items:
            $ref: '#/ErrorDetail'
        requestId:
          type: string
          description: Request ID for tracing
          example: "req_abc123xyz"
        documentation:
          type: string
          format: uri
          description: Link to relevant documentation
          example: "https://docs.quikapp.io/errors/BAD_REQUEST"

ErrorDetail:
  type: object
  properties:
    field:
      type: string
      description: Field name that caused the error
      example: "email"
    message:
      type: string
      description: Specific error message for this field
      example: "Invalid email format"
    code:
      type: string
      description: Specific error code
      example: "INVALID_FORMAT"
    value:
      description: The invalid value (when safe to include)
      example: "not-an-email"

ValidationError:
  allOf:
    - $ref: '#/Error'
    - type: object
      properties:
        error:
          type: object
          properties:
            code:
              type: string
              enum: [VALIDATION_ERROR]
            details:
              type: array
              items:
                $ref: '#/ErrorDetail'
              minItems: 1
