# Workspace Schema Definitions

Workspace:
  type: object
  required:
    - id
    - name
    - slug
    - createdAt
  properties:
    id:
      type: string
      format: uuid
      description: Unique workspace identifier
      example: "550e8400-e29b-41d4-a716-446655440000"
    name:
      type: string
      description: Workspace display name
      example: "Acme Corporation"
    slug:
      type: string
      pattern: "^[a-z0-9-]{3,50}$"
      description: URL-friendly workspace identifier
      example: "acme-corp"
    description:
      type: string
      maxLength: 500
      description: Workspace description
      example: "Official workspace for Acme Corporation"
    icon:
      type: string
      format: uri
      description: Workspace icon URL
      example: "https://cdn.quikapp.io/workspaces/acme/icon.png"
    domain:
      type: string
      description: Custom domain for the workspace
      example: "acme.quikapp.io"
    plan:
      type: string
      enum: [free, pro, business, enterprise]
      description: Subscription plan
      example: "business"
    settings:
      $ref: '#/WorkspaceSettings'
    stats:
      $ref: '#/WorkspaceStats'
    ownerId:
      type: string
      format: uuid
      description: Workspace owner user ID
    createdAt:
      type: string
      format: date-time
      example: "2024-01-01T00:00:00Z"
    updatedAt:
      type: string
      format: date-time
      example: "2024-01-15T10:30:00Z"

WorkspaceSettings:
  type: object
  properties:
    defaultChannels:
      type: array
      items:
        type: string
        format: uuid
      description: Channels users auto-join
    allowGuestAccess:
      type: boolean
      description: Allow external guests
      default: false
    messageRetention:
      type: integer
      description: Message retention days (0 = forever)
      default: 0
    fileRetention:
      type: integer
      description: File retention days (0 = forever)
      default: 0
    allowedDomains:
      type: array
      items:
        type: string
      description: Allowed email domains for signup
      example: ["acme.com", "acme.io"]
    sso:
      type: object
      properties:
        enabled:
          type: boolean
          default: false
        provider:
          type: string
          enum: [saml, oidc]
        required:
          type: boolean
          default: false
    security:
      type: object
      properties:
        mfaRequired:
          type: boolean
          default: false
        sessionTimeout:
          type: integer
          description: Session timeout in minutes
          default: 10080
        ipAllowlist:
          type: array
          items:
            type: string
          description: Allowed IP addresses/ranges

WorkspaceStats:
  type: object
  properties:
    memberCount:
      type: integer
      description: Total number of members
      example: 150
    channelCount:
      type: integer
      description: Total number of channels
      example: 45
    messageCount:
      type: integer
      description: Total messages sent
      example: 125000
    fileCount:
      type: integer
      description: Total files shared
      example: 3500
    storageUsed:
      type: integer
      format: int64
      description: Storage used in bytes
      example: 5368709120

WorkspaceMember:
  type: object
  required:
    - userId
    - workspaceId
    - role
    - joinedAt
  properties:
    userId:
      type: string
      format: uuid
    workspaceId:
      type: string
      format: uuid
    user:
      $ref: './user.yaml#/UserProfile'
    role:
      type: string
      enum: [member, admin, owner, guest]
      description: Member role in workspace
      example: "member"
    title:
      type: string
      description: Custom title in workspace
      example: "Engineering Lead"
    isActive:
      type: boolean
      description: Whether the member is active
      default: true
    joinedAt:
      type: string
      format: date-time
      example: "2024-01-01T00:00:00Z"
    invitedBy:
      type: string
      format: uuid
      description: User who invited this member

WorkspaceInvite:
  type: object
  required:
    - id
    - workspaceId
    - email
    - status
  properties:
    id:
      type: string
      format: uuid
    workspaceId:
      type: string
      format: uuid
    email:
      type: string
      format: email
      example: "newuser@example.com"
    role:
      type: string
      enum: [member, admin, guest]
      default: member
    channels:
      type: array
      items:
        type: string
        format: uuid
      description: Channels to auto-add user to
    message:
      type: string
      description: Custom invite message
    status:
      type: string
      enum: [pending, accepted, expired, revoked]
      example: "pending"
    expiresAt:
      type: string
      format: date-time
    invitedBy:
      type: string
      format: uuid
    createdAt:
      type: string
      format: date-time

WorkspaceCreateRequest:
  type: object
  required:
    - name
  properties:
    name:
      type: string
      minLength: 2
      maxLength: 100
      example: "My Workspace"
    slug:
      type: string
      pattern: "^[a-z0-9-]{3,50}$"
      description: Auto-generated if not provided
    description:
      type: string
      maxLength: 500

WorkspaceUpdateRequest:
  type: object
  properties:
    name:
      type: string
      minLength: 2
      maxLength: 100
    description:
      type: string
      maxLength: 500
    settings:
      $ref: '#/WorkspaceSettings'

InviteMembersRequest:
  type: object
  required:
    - emails
  properties:
    emails:
      type: array
      items:
        type: string
        format: email
      minItems: 1
      maxItems: 100
      description: Email addresses to invite
    role:
      type: string
      enum: [member, admin, guest]
      default: member
    channels:
      type: array
      items:
        type: string
        format: uuid
      description: Channels to auto-add invitees to
    message:
      type: string
      maxLength: 500
      description: Custom invite message
