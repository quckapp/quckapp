# SonarQube Project Configuration
# Run: sonar-scanner or npx sonarqube-scanner

# Project identification
sonar.projectKey=quckchat-backend
sonar.projectName=QuckChat Backend
sonar.projectVersion=1.0.0
sonar.organization=quckchat

# Source code location
sonar.sources=src
sonar.tests=src
sonar.test.inclusions=**/*.spec.ts,**/*.test.ts,**/*.e2e-spec.ts

# Exclusions
sonar.exclusions=\
  **/node_modules/**,\
  **/dist/**,\
  **/coverage/**,\
  **/*.spec.ts,\
  **/*.test.ts,\
  **/*.e2e-spec.ts,\
  **/test/**,\
  **/*.d.ts,\
  **/migrations/**

# Test exclusions
sonar.test.exclusions=\
  **/node_modules/**,\
  **/dist/**

# Coverage reports
sonar.javascript.lcov.reportPaths=coverage/lcov.info
sonar.typescript.lcov.reportPaths=coverage/lcov.info

# TypeScript configuration
sonar.typescript.tsconfigPath=tsconfig.json

# Source encoding
sonar.sourceEncoding=UTF-8

# Language
sonar.language=ts

# Duplications
sonar.cpd.exclusions=\
  **/*.spec.ts,\
  **/*.test.ts,\
  **/index.ts,\
  **/*.dto.ts,\
  **/*.entity.ts,\
  **/*.schema.ts

# Quality Gate
# These are enforced by SonarQube server configuration
# Recommended thresholds for new code:
# - Coverage: >= 80%
# - Duplicated Lines: <= 3%
# - Maintainability Rating: A
# - Reliability Rating: A
# - Security Rating: A
# - Security Hotspots Reviewed: 100%

# Issue severity mapping
# Customize how issues are categorized

# Code smells detection
sonar.issue.ignore.multicriteria=e1,e2,e3

# Ignore certain patterns
# e1: Ignore cognitive complexity in test files
sonar.issue.ignore.multicriteria.e1.ruleKey=typescript:S3776
sonar.issue.ignore.multicriteria.e1.resourceKey=**/*.spec.ts

# e2: Ignore any in test files
sonar.issue.ignore.multicriteria.e2.ruleKey=typescript:S4324
sonar.issue.ignore.multicriteria.e2.resourceKey=**/*.spec.ts

# e3: Ignore magic numbers in DTOs
sonar.issue.ignore.multicriteria.e3.ruleKey=typescript:S109
sonar.issue.ignore.multicriteria.e3.resourceKey=**/*.dto.ts

# Security hotspots to review
# These require manual verification

# Links
sonar.links.homepage=https://github.com/your-org/quckchat
sonar.links.ci=https://github.com/your-org/quckchat/actions
sonar.links.issue=https://github.com/your-org/quckchat/issues
sonar.links.scm=https://github.com/your-org/quckchat

# Branch analysis (requires Developer Edition+)
# sonar.branch.name=main
# sonar.pullrequest.key=PR_KEY
# sonar.pullrequest.branch=feature/branch
# sonar.pullrequest.base=main
