{"openapi":"3.0.1","info":{"title":"OpenAPI definition","version":"v0"},"servers":[{"url":"http://localhost:8081/api/auth","description":"Generated server url"}],"tags":[{"name":"Migration","description":"Data migration endpoints (internal use only)"},{"name":"OAuth2","description":"OAuth2 authentication endpoints"},{"name":"Authentication","description":"Authentication and authorization endpoints"},{"name":"User Profiles","description":"User profile management endpoints"},{"name":"Phone Authentication","description":"Phone-based OTP authentication endpoints"}],"paths":{"/v1/users/me":{"get":{"tags":["User Profiles"],"summary":"Get current user's profile","operationId":"getMyProfile","parameters":[{"name":"X-User-ID","in":"header","required":true,"schema":{"type":"string","format":"uuid"}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/UserProfileDto"}}}}},"security":[{"bearerAuth":[]}]},"put":{"tags":["User Profiles"],"summary":"Update current user's profile","operationId":"updateMyProfile","parameters":[{"name":"X-User-ID","in":"header","required":true,"schema":{"type":"string","format":"uuid"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UpdateProfileRequest"}}},"required":true},"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/UserProfileDto"}}}}},"security":[{"bearerAuth":[]}]}},"/v1/users/me/status":{"put":{"tags":["User Profiles"],"summary":"Update user status (online/offline/away)","operationId":"updateStatus","parameters":[{"name":"X-User-ID","in":"header","required":true,"schema":{"type":"string","format":"uuid"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UpdateStatusRequest"}}},"required":true},"responses":{"200":{"description":"OK"}},"security":[{"bearerAuth":[]}]}},"/v1/users/me/settings":{"get":{"tags":["User Profiles"],"summary":"Get user settings","operationId":"getSettings","parameters":[{"name":"X-User-ID","in":"header","required":true,"schema":{"type":"string","format":"uuid"}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/UserSettingsDto"}}}}},"security":[{"bearerAuth":[]}]},"put":{"tags":["User Profiles"],"summary":"Update user settings","operationId":"updateSettings","parameters":[{"name":"X-User-ID","in":"header","required":true,"schema":{"type":"string","format":"uuid"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UpdateSettingsRequest"}}},"required":true},"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/UserSettingsDto"}}}}},"security":[{"bearerAuth":[]}]}},"/v1/users/me/devices/{deviceId}/fcm-token":{"put":{"tags":["User Profiles"],"summary":"Update device FCM token","operationId":"updateFcmToken","parameters":[{"name":"X-User-ID","in":"header","required":true,"schema":{"type":"string","format":"uuid"}},{"name":"deviceId","in":"path","required":true,"schema":{"type":"string"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UpdateFcmTokenRequest"}}},"required":true},"responses":{"200":{"description":"OK"}},"security":[{"bearerAuth":[]}]}},"/v1/users/me/devices/{deviceId}/activity":{"put":{"tags":["User Profiles"],"summary":"Update device activity timestamp","operationId":"updateDeviceActivity","parameters":[{"name":"X-User-ID","in":"header","required":true,"schema":{"type":"string","format":"uuid"}},{"name":"deviceId","in":"path","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"OK"}},"security":[{"bearerAuth":[]}]}},"/v1/users/me/devices":{"get":{"tags":["User Profiles"],"summary":"Get linked devices","operationId":"getLinkedDevices","parameters":[{"name":"X-User-ID","in":"header","required":true,"schema":{"type":"string","format":"uuid"}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/LinkedDeviceDto"}}}}}},"security":[{"bearerAuth":[]}]},"post":{"tags":["User Profiles"],"summary":"Link a device","operationId":"linkDevice","parameters":[{"name":"X-User-ID","in":"header","required":true,"schema":{"type":"string","format":"uuid"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/LinkDeviceRequest"}}},"required":true},"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/LinkedDeviceDto"}}}}},"security":[{"bearerAuth":[]}]}},"/v1/users/me/blocked-users":{"get":{"tags":["User Profiles"],"summary":"Get list of blocked users","operationId":"getBlockedUsers","parameters":[{"name":"X-User-ID","in":"header","required":true,"schema":{"type":"string","format":"uuid"}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/UserProfileSummaryDto"}}}}}},"security":[{"bearerAuth":[]}]},"post":{"tags":["User Profiles"],"summary":"Block a user","operationId":"blockUser","parameters":[{"name":"X-User-ID","in":"header","required":true,"schema":{"type":"string","format":"uuid"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/BlockUserRequest"}}},"required":true},"responses":{"200":{"description":"OK"}},"security":[{"bearerAuth":[]}]}},"/v1/users/internal/fcm-tokens/batch":{"post":{"tags":["User Profiles"],"summary":"Get FCM tokens for multiple users (internal use)","operationId":"getFcmTokensBatch","parameters":[{"name":"X-API-Key","in":"header","required":true,"schema":{"type":"string"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/BatchFcmTokensRequest"}}},"required":true},"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"type":"object","additionalProperties":{"type":"array","items":{"type":"string"}}}}}}},"security":[{"bearerAuth":[]}]}},"/v1/users/admin/unban/{userId}":{"post":{"tags":["User Profiles"],"summary":"Unban a user (admin only)","operationId":"unbanUser","parameters":[{"name":"userId","in":"path","required":true,"schema":{"type":"string","format":"uuid"}}],"responses":{"200":{"description":"OK"}},"security":[{"bearerAuth":[]}]}},"/v1/users/admin/role":{"post":{"tags":["User Profiles"],"summary":"Update user role (admin only)","operationId":"updateRole","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UpdateRoleRequest"}}},"required":true},"responses":{"200":{"description":"OK"}},"security":[{"bearerAuth":[]}]}},"/v1/users/admin/permissions":{"post":{"tags":["User Profiles"],"summary":"Update user permissions (admin only)","operationId":"updatePermissions","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UpdatePermissionsRequest"}}},"required":true},"responses":{"200":{"description":"OK"}},"security":[{"bearerAuth":[]}]}},"/v1/users/admin/ban":{"post":{"tags":["User Profiles"],"summary":"Ban a user (admin only)","operationId":"banUser","parameters":[{"name":"X-User-ID","in":"header","required":true,"schema":{"type":"string","format":"uuid"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/BanUserRequest"}}},"required":true},"responses":{"200":{"description":"OK"}},"security":[{"bearerAuth":[]}]}},"/v1/token/validate":{"post":{"tags":["Authentication"],"summary":"Validate JWT token","operationId":"validateToken","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/TokenValidationRequest"}}},"required":true},"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/TokenValidationResponse"}}}}}}},"/v1/token/revoke":{"post":{"tags":["Authentication"],"summary":"Revoke a specific token","operationId":"revokeToken","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/RevokeTokenRequest"}}},"required":true},"responses":{"200":{"description":"OK"}}}},"/v1/token/revoke-all":{"post":{"tags":["Authentication"],"summary":"Revoke all tokens for current user","operationId":"revokeAllTokens","parameters":[{"name":"Authorization","in":"header","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"OK"}}}},"/v1/token/refresh":{"post":{"tags":["Authentication"],"summary":"Refresh access token","operationId":"refreshToken","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/RefreshTokenRequest"}}},"required":true},"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/TokenResponse"}}}}}}},"/v1/register":{"post":{"tags":["Authentication"],"summary":"Register new user","operationId":"register","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/RegisterRequest"}}},"required":true},"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/AuthResponse"}}}}}}},"/v1/password/reset":{"post":{"tags":["Authentication"],"summary":"Reset password with token","operationId":"resetPassword","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResetPasswordRequest"}}},"required":true},"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/MessageResponse"}}}}}}},"/v1/password/forgot":{"post":{"tags":["Authentication"],"summary":"Request password reset","operationId":"forgotPassword","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ForgotPasswordRequest"}}},"required":true},"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/MessageResponse"}}}}}}},"/v1/password/change":{"post":{"tags":["Authentication"],"summary":"Change password (authenticated)","operationId":"changePassword","parameters":[{"name":"Authorization","in":"header","required":true,"schema":{"type":"string"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ChangePasswordRequest"}}},"required":true},"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/MessageResponse"}}}}}}},"/v1/oauth/{provider}":{"post":{"tags":["Authentication"],"summary":"Login/register with OAuth provider","operationId":"oauthLogin","parameters":[{"name":"provider","in":"path","required":true,"schema":{"type":"string"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/OAuthRequest"}}},"required":true},"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/AuthResponse"}}}}}}},"/v1/oauth/{provider}/link":{"post":{"tags":["Authentication"],"summary":"Link OAuth provider to existing account","operationId":"linkOAuthProvider","parameters":[{"name":"Authorization","in":"header","required":true,"schema":{"type":"string"}},{"name":"provider","in":"path","required":true,"schema":{"type":"string"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/OAuthRequest"}}},"required":true},"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/MessageResponse"}}}}}}},"/v1/migration/validate":{"post":{"tags":["Migration"],"summary":"Validate migration for sample users","operationId":"validateMigration","parameters":[{"name":"X-API-Key","in":"header","required":true,"schema":{"type":"string"}}],"requestBody":{"content":{"application/json":{"schema":{"type":"array","items":{"type":"string"}}}},"required":true},"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"type":"object","additionalProperties":{"type":"object"}}}}}},"security":[{"apiKey":[]}]}},"/v1/migration/users/batch":{"post":{"tags":["Migration"],"summary":"Batch import users from MongoDB migration","operationId":"importUsersBatch","parameters":[{"name":"X-API-Key","in":"header","required":true,"schema":{"type":"string"}}],"requestBody":{"content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/MigratedUserRequest"}}}},"required":true},"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/MigrationResult"}}}}},"security":[{"apiKey":[]}]}},"/v1/migration/settings/batch":{"post":{"tags":["Migration"],"summary":"Batch import user settings from MongoDB migration","operationId":"importSettingsBatch","parameters":[{"name":"X-API-Key","in":"header","required":true,"schema":{"type":"string"}}],"requestBody":{"content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/MigratedSettingsRequest"}}}},"required":true},"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/MigrationResult"}}}}},"security":[{"apiKey":[]}]}},"/v1/logout":{"post":{"tags":["Authentication"],"summary":"Logout and revoke tokens","operationId":"logout","parameters":[{"name":"Authorization","in":"header","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"OK"}}}},"/v1/login":{"post":{"tags":["Authentication"],"summary":"Login with email/password","operationId":"login","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/LoginRequest"}}},"required":true},"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/AuthResponse"}}}}}}},"/v1/login/2fa":{"post":{"tags":["Authentication"],"summary":"Complete login with 2FA code","operationId":"loginWith2FA","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/TwoFactorLoginRequest"}}},"required":true},"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/AuthResponse"}}}}}}},"/v1/auth/phone/verify-otp":{"post":{"tags":["Phone Authentication"],"summary":"Verify OTP","description":"Verify the OTP code without logging in","operationId":"verifyOtp","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/PhoneVerifyRequest"}}},"required":true},"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/OtpResponse"}}}}}}},"/v1/auth/phone/resend-otp":{"post":{"tags":["Phone Authentication"],"summary":"Resend OTP","description":"Resend OTP to the same phone number","operationId":"resendOtp","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/PhoneOtpRequest"}}},"required":true},"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/OtpResponse"}}}}}}},"/v1/auth/phone/request-otp":{"post":{"tags":["Phone Authentication"],"summary":"Request OTP","description":"Request a one-time password sent via SMS","operationId":"requestOtp","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/PhoneOtpRequest"}}},"required":true},"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/OtpResponse"}}}}}}},"/v1/auth/phone/login":{"post":{"tags":["Phone Authentication"],"summary":"Login with OTP","description":"Verify OTP and login. Creates account if phone number is new.","operationId":"loginWithOtp","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/PhoneLoginRequest"}}},"required":true},"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/OtpResponse"}}}}}}},"/v1/2fa/setup":{"post":{"tags":["Authentication"],"summary":"Setup 2FA - get QR code","operationId":"setup2FA","parameters":[{"name":"Authorization","in":"header","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/TwoFactorSetupResponse"}}}}}}},"/v1/2fa/enable":{"post":{"tags":["Authentication"],"summary":"Enable 2FA after verification","operationId":"enable2FA","parameters":[{"name":"Authorization","in":"header","required":true,"schema":{"type":"string"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/TwoFactorEnableRequest"}}},"required":true},"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/TwoFactorEnableResponse"}}}}}}},"/v1/2fa/disable":{"post":{"tags":["Authentication"],"summary":"Disable 2FA","operationId":"disable2FA","parameters":[{"name":"Authorization","in":"header","required":true,"schema":{"type":"string"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/TwoFactorDisableRequest"}}},"required":true},"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/MessageResponse"}}}}}}},"/v1/2fa/backup-codes":{"post":{"tags":["Authentication"],"summary":"Generate new backup codes","operationId":"generateBackupCodes","parameters":[{"name":"Authorization","in":"header","required":true,"schema":{"type":"string"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/TwoFactorVerifyRequest"}}},"required":true},"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/BackupCodesResponse"}}}}}}},"/v1/users/{userId}":{"get":{"tags":["User Profiles"],"summary":"Get profile by user ID","operationId":"getProfile","parameters":[{"name":"userId","in":"path","required":true,"schema":{"type":"string","format":"uuid"}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/UserProfileDto"}}}}},"security":[{"bearerAuth":[]}]}},"/v1/users/search":{"get":{"tags":["User Profiles"],"summary":"Search users","operationId":"searchUsers","parameters":[{"name":"query","in":"query","required":true,"schema":{"type":"string"}},{"name":"excludeUserId","in":"query","required":false,"schema":{"type":"string","format":"uuid"}},{"name":"page","in":"query","required":false,"schema":{"type":"integer","format":"int32","default":0}},{"name":"size","in":"query","required":false,"schema":{"type":"integer","format":"int32","default":20}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/PageUserProfileSummaryDto"}}}}},"security":[{"bearerAuth":[]}]}},"/v1/users/internal/fcm-tokens/{userId}":{"get":{"tags":["User Profiles"],"summary":"Get FCM tokens for a user (internal use)","operationId":"getFcmTokens","parameters":[{"name":"userId","in":"path","required":true,"schema":{"type":"string","format":"uuid"}},{"name":"X-API-Key","in":"header","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/FcmTokensResponse"}}}}},"security":[{"bearerAuth":[]}]}},"/v1/users/internal/check-blocked":{"get":{"tags":["User Profiles"],"summary":"Check if users are blocked (internal use)","operationId":"checkBlocked","parameters":[{"name":"userId1","in":"query","required":true,"schema":{"type":"string","format":"uuid"}},{"name":"userId2","in":"query","required":true,"schema":{"type":"string","format":"uuid"}},{"name":"X-API-Key","in":"header","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"type":"boolean"}}}}},"security":[{"bearerAuth":[]}]}},"/v1/users/by-username/{username}":{"get":{"tags":["User Profiles"],"summary":"Get profile by username","operationId":"getProfileByUsername","parameters":[{"name":"username","in":"path","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/UserProfileDto"}}}}},"security":[{"bearerAuth":[]}]}},"/v1/users/by-phone/{phoneNumber}":{"get":{"tags":["User Profiles"],"summary":"Get profile by phone number","operationId":"getProfileByPhone","parameters":[{"name":"phoneNumber","in":"path","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/UserProfileDto"}}}}},"security":[{"bearerAuth":[]}]}},"/v1/users/by-external-id/{externalId}":{"get":{"tags":["User Profiles"],"summary":"Get profile by external ID (MongoDB ID)","operationId":"getProfileByExternalId","parameters":[{"name":"externalId","in":"path","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/UserProfileDto"}}}}},"security":[{"bearerAuth":[]}]}},"/v1/users/batch":{"get":{"tags":["User Profiles"],"summary":"Get multiple profiles by IDs","operationId":"getProfilesByIds","parameters":[{"name":"ids","in":"query","required":true,"schema":{"type":"array","items":{"type":"string","format":"uuid"}}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/UserProfileDto"}}}}}},"security":[{"bearerAuth":[]}]}},"/v1/users/batch/external":{"get":{"tags":["User Profiles"],"summary":"Get multiple profiles by external IDs","operationId":"getProfilesByExternalIds","parameters":[{"name":"externalIds","in":"query","required":true,"schema":{"type":"array","items":{"type":"string"}}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/UserProfileDto"}}}}}},"security":[{"bearerAuth":[]}]}},"/v1/users/admin/statistics":{"get":{"tags":["User Profiles"],"summary":"Get user statistics (admin only)","operationId":"getStatistics","responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/UserStatisticsDto"}}}}},"security":[{"bearerAuth":[]}]}},"/v1/sessions":{"get":{"tags":["Authentication"],"summary":"Get active sessions","operationId":"getSessions","parameters":[{"name":"Authorization","in":"header","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/SessionsResponse"}}}}}},"delete":{"tags":["Authentication"],"summary":"Terminate all other sessions","operationId":"terminateAllSessions","parameters":[{"name":"Authorization","in":"header","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"OK"}}}},"/v1/oauth2/providers":{"get":{"tags":["OAuth2"],"summary":"Get available OAuth2 providers","operationId":"getProviders","responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ProvidersResponse"}}}}}}},"/v1/oauth2/linked":{"get":{"tags":["OAuth2"],"summary":"Get linked OAuth2 providers for current user","operationId":"getLinkedProviders","parameters":[{"name":"Authorization","in":"header","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/LinkedProvidersResponse"}}}}}}},"/v1/oauth2/authorize/{provider}":{"get":{"tags":["OAuth2"],"summary":"Get authorization URL for OAuth2 provider","operationId":"getAuthorizationUrl","parameters":[{"name":"provider","in":"path","required":true,"schema":{"type":"string"}},{"name":"redirectUri","in":"query","required":false,"schema":{"type":"string"}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/AuthorizationUrlResponse"}}}}}}},"/v1/migration/status":{"get":{"tags":["Migration"],"summary":"Get current migration status","operationId":"getMigrationStatus","parameters":[{"name":"X-API-Key","in":"header","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"type":"object","additionalProperties":{"type":"object"}}}}}},"security":[{"apiKey":[]}]}},"/v1/users/me/devices/{deviceId}":{"delete":{"tags":["User Profiles"],"summary":"Unlink a device","operationId":"unlinkDevice","parameters":[{"name":"X-User-ID","in":"header","required":true,"schema":{"type":"string","format":"uuid"}},{"name":"deviceId","in":"path","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"OK"}},"security":[{"bearerAuth":[]}]}},"/v1/users/me/blocked-users/{blockedUserId}":{"delete":{"tags":["User Profiles"],"summary":"Unblock a user","operationId":"unblockUser","parameters":[{"name":"X-User-ID","in":"header","required":true,"schema":{"type":"string","format":"uuid"}},{"name":"blockedUserId","in":"path","required":true,"schema":{"type":"string","format":"uuid"}}],"responses":{"200":{"description":"OK"}},"security":[{"bearerAuth":[]}]}},"/v1/sessions/{sessionId}":{"delete":{"tags":["Authentication"],"summary":"Terminate specific session","operationId":"terminateSession","parameters":[{"name":"Authorization","in":"header","required":true,"schema":{"type":"string"}},{"name":"sessionId","in":"path","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"OK"}}}},"/v1/oauth/{provider}/unlink":{"delete":{"tags":["Authentication"],"summary":"Unlink OAuth provider from account","operationId":"unlinkOAuthProvider","parameters":[{"name":"Authorization","in":"header","required":true,"schema":{"type":"string"}},{"name":"provider","in":"path","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/MessageResponse"}}}}}}}},"components":{"schemas":{"UpdateProfileRequest":{"type":"object","properties":{"username":{"maxLength":50,"minLength":3,"pattern":"^[a-zA-Z0-9_]+$","type":"string"},"displayName":{"maxLength":100,"minLength":2,"type":"string"},"email":{"type":"string"},"avatar":{"type":"string"},"bio":{"maxLength":500,"minLength":0,"type":"string"},"publicKey":{"type":"string"}}},"UserProfileDto":{"type":"object","properties":{"id":{"type":"string","format":"uuid"},"externalId":{"type":"string"},"phoneNumber":{"type":"string"},"username":{"type":"string"},"displayName":{"type":"string"},"email":{"type":"string"},"avatar":{"type":"string"},"bio":{"type":"string"},"publicKey":{"type":"string"},"status":{"type":"string","enum":["ONLINE","OFFLINE","AWAY","BUSY"]},"lastSeen":{"type":"string","format":"date-time"},"role":{"type":"string","enum":["USER","MODERATOR","ADMIN","SUPER_ADMIN"]},"permissions":{"uniqueItems":true,"type":"array","items":{"type":"string"}},"banReason":{"type":"string"},"bannedAt":{"type":"string","format":"date-time"},"bannedBy":{"type":"string","format":"uuid"},"createdAt":{"type":"string","format":"date-time"},"updatedAt":{"type":"string","format":"date-time"},"verified":{"type":"boolean"},"banned":{"type":"boolean"},"active":{"type":"boolean"}}},"UpdateStatusRequest":{"required":["status"],"type":"object","properties":{"status":{"type":"string","enum":["ONLINE","OFFLINE","AWAY","BUSY"]}}},"UpdateSettingsRequest":{"type":"object","properties":{"darkMode":{"type":"boolean"},"autoDownloadMedia":{"type":"boolean"},"saveToGallery":{"type":"boolean"},"pushNotifications":{"type":"boolean"},"messageNotifications":{"type":"boolean"},"groupNotifications":{"type":"boolean"},"callNotifications":{"type":"boolean"},"soundEnabled":{"type":"boolean"},"vibrationEnabled":{"type":"boolean"},"showPreview":{"type":"boolean"},"inAppNotifications":{"type":"boolean"},"notificationLight":{"type":"boolean"},"readReceipts":{"type":"boolean"},"lastSeenVisible":{"type":"boolean"},"profilePhotoVisibility":{"type":"string","enum":["EVERYONE","CONTACTS","NOBODY"]},"statusVisibility":{"type":"string","enum":["EVERYONE","CONTACTS","NOBODY"]},"fingerprintLock":{"type":"boolean"}}},"UserSettingsDto":{"type":"object","properties":{"userId":{"type":"string","format":"uuid"},"darkMode":{"type":"boolean"},"autoDownloadMedia":{"type":"boolean"},"saveToGallery":{"type":"boolean"},"pushNotifications":{"type":"boolean"},"messageNotifications":{"type":"boolean"},"groupNotifications":{"type":"boolean"},"callNotifications":{"type":"boolean"},"soundEnabled":{"type":"boolean"},"vibrationEnabled":{"type":"boolean"},"showPreview":{"type":"boolean"},"inAppNotifications":{"type":"boolean"},"notificationLight":{"type":"boolean"},"readReceipts":{"type":"boolean"},"lastSeenVisible":{"type":"boolean"},"profilePhotoVisibility":{"type":"string","enum":["EVERYONE","CONTACTS","NOBODY"]},"statusVisibility":{"type":"string","enum":["EVERYONE","CONTACTS","NOBODY"]},"fingerprintLock":{"type":"boolean"},"blockedUserIds":{"uniqueItems":true,"type":"array","items":{"type":"string","format":"uuid"}},"createdAt":{"type":"string","format":"date-time"},"updatedAt":{"type":"string","format":"date-time"}}},"UpdateFcmTokenRequest":{"type":"object","properties":{"fcmToken":{"type":"string"}}},"LinkDeviceRequest":{"required":["deviceId"],"type":"object","properties":{"deviceId":{"type":"string"},"deviceName":{"maxLength":255,"minLength":0,"type":"string"},"deviceType":{"type":"string","enum":["MOBILE","WEB","DESKTOP"]},"fcmToken":{"type":"string"}}},"LinkedDeviceDto":{"type":"object","properties":{"id":{"type":"string","format":"uuid"},"deviceId":{"type":"string"},"deviceName":{"type":"string"},"deviceType":{"type":"string","enum":["MOBILE","WEB","DESKTOP"]},"hasFcmToken":{"type":"boolean"},"lastActive":{"type":"string","format":"date-time"},"linkedAt":{"type":"string","format":"date-time"}}},"BlockUserRequest":{"required":["userId"],"type":"object","properties":{"userId":{"type":"string","format":"uuid"}}},"BatchFcmTokensRequest":{"required":["userIds"],"type":"object","properties":{"userIds":{"type":"array","items":{"type":"string","format":"uuid"}}}},"UpdateRoleRequest":{"required":["role","userId"],"type":"object","properties":{"userId":{"type":"string","format":"uuid"},"role":{"type":"string","enum":["USER","MODERATOR","ADMIN","SUPER_ADMIN"]}}},"UpdatePermissionsRequest":{"required":["permissions","userId"],"type":"object","properties":{"userId":{"type":"string","format":"uuid"},"permissions":{"uniqueItems":true,"type":"array","items":{"type":"string"}}}},"BanUserRequest":{"required":["userId"],"type":"object","properties":{"userId":{"type":"string","format":"uuid"},"reason":{"maxLength":500,"minLength":0,"type":"string"}}},"TokenValidationRequest":{"required":["token"],"type":"object","properties":{"token":{"type":"string"}}},"TokenValidationResponse":{"type":"object","properties":{"valid":{"type":"boolean"},"userId":{"type":"string"},"externalId":{"type":"string"},"email":{"type":"string"},"expiresAt":{"type":"string","format":"date-time"},"tokenType":{"type":"string"}}},"RevokeTokenRequest":{"required":["token"],"type":"object","properties":{"token":{"type":"string"},"reason":{"type":"string"}}},"RefreshTokenRequest":{"required":["refreshToken"],"type":"object","properties":{"refreshToken":{"type":"string"}}},"TokenResponse":{"type":"object","properties":{"accessToken":{"type":"string"},"refreshToken":{"type":"string"},"expiresIn":{"type":"integer","format":"int64"},"tokenType":{"type":"string"}}},"RegisterRequest":{"required":["email","password"],"type":"object","properties":{"email":{"type":"string"},"password":{"maxLength":100,"minLength":8,"type":"string"},"externalId":{"type":"string"}}},"AuthResponse":{"type":"object","properties":{"accessToken":{"type":"string"},"refreshToken":{"type":"string"},"expiresIn":{"type":"integer","format":"int64"},"tokenType":{"type":"string"},"user":{"$ref":"#/components/schemas/UserInfo"},"requiresTwoFactor":{"type":"boolean"},"tempToken":{"type":"string"}}},"UserInfo":{"type":"object","properties":{"id":{"type":"string"},"externalId":{"type":"string"},"email":{"type":"string"},"twoFactorEnabled":{"type":"boolean"},"oauthProviders":{"type":"array","items":{"type":"string"}}}},"ResetPasswordRequest":{"required":["newPassword","token"],"type":"object","properties":{"token":{"type":"string"},"newPassword":{"maxLength":100,"minLength":8,"type":"string"}}},"MessageResponse":{"type":"object","properties":{"message":{"type":"string"}}},"ForgotPasswordRequest":{"required":["email"],"type":"object","properties":{"email":{"type":"string"}}},"ChangePasswordRequest":{"required":["currentPassword","newPassword"],"type":"object","properties":{"currentPassword":{"type":"string"},"newPassword":{"maxLength":100,"minLength":8,"type":"string"},"logoutOtherSessions":{"type":"boolean"}}},"OAuthRequest":{"required":["accessToken","providerUserId"],"type":"object","properties":{"providerUserId":{"type":"string"},"accessToken":{"type":"string"},"refreshToken":{"type":"string"},"idToken":{"type":"string"},"email":{"type":"string"},"name":{"type":"string"},"avatarUrl":{"type":"string"},"tokenExpiresAt":{"type":"string","format":"date-time"}}},"MigratedLinkedDevice":{"type":"object","properties":{"deviceId":{"type":"string"},"deviceName":{"type":"string"},"deviceType":{"type":"string"},"fcmToken":{"type":"string"},"lastActive":{"type":"string","format":"date-time"},"linkedAt":{"type":"string","format":"date-time"}}},"MigratedOAuthProvider":{"type":"object","properties":{"provider":{"type":"string"},"providerId":{"type":"string"},"email":{"type":"string"},"linkedAt":{"type":"string","format":"date-time"}}},"MigratedUserRequest":{"type":"object","properties":{"externalId":{"type":"string"},"phoneNumber":{"type":"string"},"username":{"type":"string"},"displayName":{"type":"string"},"email":{"type":"string"},"passwordHash":{"type":"string"},"avatar":{"type":"string"},"bio":{"type":"string"},"publicKey":{"type":"string"},"status":{"type":"string"},"lastSeen":{"type":"string","format":"date-time"},"role":{"type":"string"},"permissions":{"uniqueItems":true,"type":"array","items":{"type":"string"}},"banReason":{"type":"string"},"bannedAt":{"type":"string","format":"date-time"},"bannedBy":{"type":"string"},"oauthProviders":{"type":"array","items":{"$ref":"#/components/schemas/MigratedOAuthProvider"}},"linkedDevices":{"type":"array","items":{"$ref":"#/components/schemas/MigratedLinkedDevice"}},"legacyFcmTokens":{"type":"array","items":{"type":"string"}},"twoFactorEnabled":{"type":"boolean"},"twoFactorSecret":{"type":"string"},"backupCodes":{"uniqueItems":true,"type":"array","items":{"type":"string"}},"createdAt":{"type":"string","format":"date-time"},"updatedAt":{"type":"string","format":"date-time"},"verified":{"type":"boolean"},"banned":{"type":"boolean"},"active":{"type":"boolean"}}},"MigrationError":{"type":"object","properties":{"externalId":{"type":"string"},"error":{"type":"string"}}},"MigrationResult":{"type":"object","properties":{"total":{"type":"integer","format":"int32"},"successful":{"type":"integer","format":"int32"},"failed":{"type":"integer","format":"int32"},"errors":{"type":"array","items":{"$ref":"#/components/schemas/MigrationError"}}}},"MigratedSettingsRequest":{"type":"object","properties":{"externalId":{"type":"string"},"darkMode":{"type":"boolean"},"autoDownloadMedia":{"type":"boolean"},"saveToGallery":{"type":"boolean"},"pushNotifications":{"type":"boolean"},"messageNotifications":{"type":"boolean"},"groupNotifications":{"type":"boolean"},"callNotifications":{"type":"boolean"},"soundEnabled":{"type":"boolean"},"vibrationEnabled":{"type":"boolean"},"showPreview":{"type":"boolean"},"inAppNotifications":{"type":"boolean"},"notificationLight":{"type":"boolean"},"readReceipts":{"type":"boolean"},"lastSeenVisible":{"type":"boolean"},"profilePhotoVisibility":{"type":"string"},"statusVisibility":{"type":"string"},"fingerprintLock":{"type":"boolean"},"blockedUserExternalIds":{"type":"array","items":{"type":"string"}}}},"LoginRequest":{"required":["email","password"],"type":"object","properties":{"email":{"type":"string"},"password":{"type":"string"},"deviceId":{"type":"string"},"deviceName":{"type":"string"}}},"TwoFactorLoginRequest":{"required":["code","tempToken"],"type":"object","properties":{"tempToken":{"type":"string"},"code":{"maxLength":6,"minLength":6,"type":"string"},"deviceId":{"type":"string"},"deviceName":{"type":"string"}}},"PhoneVerifyRequest":{"required":["code","phoneNumber"],"type":"object","properties":{"phoneNumber":{"pattern":"^\\+?[1-9]\\d{1,14}$","type":"string"},"code":{"maxLength":6,"minLength":6,"pattern":"^\\d{6}$","type":"string"}}},"OtpResponse":{"type":"object","properties":{"success":{"type":"boolean"},"message":{"type":"string"},"maskedPhone":{"type":"string"},"expiresInSeconds":{"type":"integer","format":"int32"},"resendCooldownSeconds":{"type":"integer","format":"int32"},"remainingAttempts":{"type":"integer","format":"int32"},"verified":{"type":"boolean"},"userId":{"type":"string"},"accessToken":{"type":"string"},"refreshToken":{"type":"string"},"user":{"$ref":"#/components/schemas/UserDto"}}},"UserDto":{"type":"object","properties":{"id":{"type":"string"},"phoneNumber":{"type":"string"},"displayName":{"type":"string"},"email":{"type":"string"},"avatar":{"type":"string"},"phoneVerified":{"type":"boolean"},"newUser":{"type":"boolean"}}},"PhoneOtpRequest":{"required":["phoneNumber"],"type":"object","properties":{"phoneNumber":{"pattern":"^\\+?[1-9]\\d{1,14}$","type":"string"}}},"PhoneLoginRequest":{"required":["code","phoneNumber"],"type":"object","properties":{"phoneNumber":{"pattern":"^\\+?[1-9]\\d{1,14}$","type":"string"},"code":{"maxLength":6,"minLength":6,"pattern":"^\\d{6}$","type":"string"},"deviceId":{"type":"string"},"deviceName":{"type":"string"},"displayName":{"type":"string"}}},"TwoFactorSetupResponse":{"type":"object","properties":{"secret":{"type":"string"},"qrCodeUrl":{"type":"string"},"otpAuthUrl":{"type":"string"}}},"TwoFactorEnableRequest":{"required":["code"],"type":"object","properties":{"code":{"maxLength":6,"minLength":6,"type":"string"}}},"TwoFactorEnableResponse":{"type":"object","properties":{"enabled":{"type":"boolean"},"backupCodes":{"uniqueItems":true,"type":"array","items":{"type":"string"}}}},"TwoFactorDisableRequest":{"required":["code","password"],"type":"object","properties":{"code":{"maxLength":6,"minLength":6,"type":"string"},"password":{"type":"string"}}},"TwoFactorVerifyRequest":{"required":["code"],"type":"object","properties":{"code":{"maxLength":6,"minLength":6,"type":"string"}}},"BackupCodesResponse":{"type":"object","properties":{"backupCodes":{"uniqueItems":true,"type":"array","items":{"type":"string"}}}},"PageUserProfileSummaryDto":{"type":"object","properties":{"totalPages":{"type":"integer","format":"int32"},"totalElements":{"type":"integer","format":"int64"},"pageable":{"$ref":"#/components/schemas/PageableObject"},"first":{"type":"boolean"},"last":{"type":"boolean"},"numberOfElements":{"type":"integer","format":"int32"},"size":{"type":"integer","format":"int32"},"content":{"type":"array","items":{"$ref":"#/components/schemas/UserProfileSummaryDto"}},"number":{"type":"integer","format":"int32"},"sort":{"$ref":"#/components/schemas/SortObject"},"empty":{"type":"boolean"}}},"PageableObject":{"type":"object","properties":{"pageNumber":{"type":"integer","format":"int32"},"pageSize":{"type":"integer","format":"int32"},"paged":{"type":"boolean"},"unpaged":{"type":"boolean"},"offset":{"type":"integer","format":"int64"},"sort":{"$ref":"#/components/schemas/SortObject"}}},"SortObject":{"type":"object","properties":{"unsorted":{"type":"boolean"},"sorted":{"type":"boolean"},"empty":{"type":"boolean"}}},"UserProfileSummaryDto":{"type":"object","properties":{"id":{"type":"string","format":"uuid"},"externalId":{"type":"string"},"username":{"type":"string"},"displayName":{"type":"string"},"avatar":{"type":"string"},"status":{"type":"string","enum":["ONLINE","OFFLINE","AWAY","BUSY"]},"lastSeen":{"type":"string","format":"date-time"},"verified":{"type":"boolean"}}},"FcmTokensResponse":{"type":"object","properties":{"userId":{"type":"string","format":"uuid"},"fcmTokens":{"type":"array","items":{"type":"string"}}}},"UserStatisticsDto":{"type":"object","properties":{"totalUsers":{"type":"integer","format":"int64"},"activeUsers":{"type":"integer","format":"int64"},"onlineUsers":{"type":"integer","format":"int64"},"bannedUsers":{"type":"integer","format":"int64"},"usersByRole":{"type":"object","additionalProperties":{"type":"integer","format":"int64"}}}},"SessionInfo":{"type":"object","properties":{"sessionId":{"type":"string"},"deviceName":{"type":"string"},"deviceId":{"type":"string"},"deviceType":{"type":"string"},"ipAddress":{"type":"string"},"location":{"type":"string"},"createdAt":{"type":"string","format":"date-time"},"lastActiveAt":{"type":"string","format":"date-time"},"current":{"type":"boolean"}}},"SessionsResponse":{"type":"object","properties":{"sessions":{"type":"array","items":{"$ref":"#/components/schemas/SessionInfo"}},"currentSessionId":{"type":"string"}}},"ProviderInfo":{"type":"object","properties":{"name":{"type":"string"},"displayName":{"type":"string"},"authorizationUrl":{"type":"string"},"icon":{"type":"string"}}},"ProvidersResponse":{"type":"object","properties":{"providers":{"type":"array","items":{"$ref":"#/components/schemas/ProviderInfo"}},"callbackUrl":{"type":"string"}}},"LinkedProvidersResponse":{"type":"object","properties":{"linkedProviders":{"type":"array","items":{"type":"string"}}}},"AuthorizationUrlResponse":{"type":"object","properties":{"provider":{"type":"string"},"authorizationUrl":{"type":"string"},"redirectUri":{"type":"string"}}}}}}